---
layout: archive
permalink: /blog/
title: "Blog Posts"
author_profile: true
redirect_from:
  - /wordpress/blog/
---

{% include base_path %}
{% capture written_year %}'None'{% endcapture %}
<div class="posts-container">
  {% for post in site.posts limit:5 %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% if year != written_year %}
      <h2 id="{{ year | slugify }}" class="archive__subtitle">{{ year }}</h2>
      {% capture written_year %}{{ year }}{% endcapture %}
    {% endif %}
    {% include archive-single.html %}
  {% endfor %}
</div>
<button id="load-more">Load More</button>
<script>
  var loadMoreButton = document.getElementById('load-more');
  var start = 5;
  var increment = 5;

  loadMoreButton.addEventListener('click', function() {
    for (var i = start; i < start + increment; i++) {
      if (i < {{ site.posts | size }}) {
        var post = {{ site.posts | jsonify }}[i];
        var year = new Date(post.date).getFullYear();
        if (year != written_year) {
          var subtitle = document.createElement('h2');
          subtitle.className = 'archive__subtitle';
          subtitle.id = year;
          subtitle.textContent = year;
          document.querySelector('.posts-container').appendChild(subtitle);
          written_year = year;
        }
        var postHTML = `
          <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
            <header class="archive__item-header">
              <h2 class="archive__item-title" itemprop="headline">
                <a href="${post.url}" rel="permalink">${post.title}</a>
              </h2>
              <p class="archive__item-meta">
                <time datetime="${post.date | date_to_xmlschema}" itemprop="datePublished">${post.date | date: "%B %d, %Y"}</time>
              </p>
            </header>
            <div class="archive__item-excerpt" itemprop="description">${post.excerpt | markdownify}</div>
          </article>`;
        var div = document.createElement('div');
        div.innerHTML = postHTML.trim();
        document.querySelector('.posts-container').appendChild(div.firstChild);
      }
    }
    start += increment;
    if (start >= {{ site.posts | size }}) {
      loadMoreButton.style.display = 'none';
    }
  });
</script>
